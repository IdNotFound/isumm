<html>
	<head>
		<meta charset="utf-8">
		<link rel="stylesheet" href="static/app.css">
		<link rel="stylesheet" href="static/default_font.css">
		<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
		<script src="//cdnjs.cloudflare.com/ajax/libs/flot/0.8.2/jquery.flot.min.js"></script>
		<script src="//cdnjs.cloudflare.com/ajax/libs/flot/0.8.2/jquery.flot.time.min.js"></script>
		<script type="text/javascript">
			var data = [[{{range .SummaryGraph}}{{.}},{{end}}]]
			var options = {
				legend: {
					position: "nw",
				},
				xaxis: {
					min: 0,
				},
				yaxis: {
					min: 0,
				},
			};
			$(document).ready(function() {
				$.plot("#summChart", data, options);
			})
		</script>
	</head>
	<body>
  		<h1>Welcome {{.User}}!</h1>
		<div id="addOpDiv" class="op">
			<b>Add Operation</b>
			<form id="addOpForm" action="op" method="post">
				Type:<select name="type">
					<option value="1" selected>Balance</option>
					<option value="2">Deposit</option>
					<option value="3">Withdrawal</option>
				</select><br>
				Investiment:<select name="inv">
					<option value="">Please select</option>
					{{range .Investments}}
						<option value="{{.Key}}">{{.Name}}</option>
					{{end}}
				</select><br>
				Value:<input type="text" name="value" size="10"><br>
				Date:<input type="date" name="date"><br>
				<input type="submit" name="action" value="Add">
			</form>
		</div>
		<div id="invDiv" class="op">
			<b>Investments</b>
			<form id="invForm" action="inv" method="post">
		    Edit:<select name="key">
				<option value="">Select to edit</option>
				{{range .Investments}}
					<option value="{{.Key}}">{{.Name}}</option>
				{{end}}
			</select><br>
			Name:<input type="text" name="name" size="15"><br>
			<input type="submit" name="action" value="New/Edit">			
			<input type="submit" name="action" value="Delete">
			</form>
		</div>
		<div id="listOpDiv" class="op">
			<b>List Operations</b>
			<form id="listOpForm" action="listops" method="post">
				Investiment:<select name="inv">
					<option value="">Please select</option>
					{{range .Investments}}
						<option value="{{.Key}}">{{.Name}}</option>
					{{end}}
				</select><br>
				<input type="submit" name="action" value="List">
			</form>
		</div>
		<div id="summDiv">
			<b>Summary</b>
			<div id="summChart"></div>
			{{range .AllSummaries}}
				<ul>
					<li>{{.Header}}</li>
					<ul>
						{{range $s := .MonthlySummaries}}
						<li>{{$s.Investment}} : Balance:{{$s.Summary.Balance}} | Change:{{$s.Summary.Change}}
						{{end}}
					</ul>
				</ul>
			{{end}}
		</div>
		<p><a href={{.LogoutUrl}}>Logout</a></p>
	</body>
</html>